
Февраль, 2024. 

В основе проекта - решение практической бизнес-задачи e-comm сектора по наращиванию оборота как фактора прибыльности.
Предположение состоит в том, что хорошие рекомендации помогут увеличить количество покупок - моментальных и отложенных,
средний чек и, следовательно, оборот. 

На основе данных  - открытого датасета retail rocket  - строим рекомендательную систему, получающую на вход id пользователя. 
Система должна предложить 3 id-товаров, которые этот пользователь наиболее вероятно купит сразу или положит в корзину.

Входные данные: 

	- events.csv - журнал событий e-comm площадки
	- item_properties_part1.csv, item_propertiespart2.csv - закодированные свойства товаров
	- category_tree.csv - дерево категорий товаров в закодированном виде

Трансформации: 

	- Выделены топ-10 пользователей и товаров, что может быль использовано в дальнейшем для формирования explicit-части рекомендаций.
	- построены признаки дbверсификации для пользователей и товаров, 
 	- выделены топ признаков товаров. 
	- Временные метки преобразованы, выделены периоды покупательской активности по дням, времени суток и часам, 
        что помогло наглядно увидеть паттерны поведения пользователей.
	- Выведен баланс типов событий по всему набору данных.

Валидация:

	построена с разбиением по времени, в пропорции 20/80 test/train.

Метрики: 

    как наиболее отражающая постановку бизнес-задачи, выбрана метрика precision@3. 
    Модели, принимавшие участие в экпериментах, оценивались по этой метрике.

Экспериментальные модели: 

	Surprise: 
		KNNWithMeans() 
		метрики:
		precision@3: 0.0001523660267293544 recall@3: 4.57684846060943e-06
        наименьшее значение метрики, черезвычайно долгая сходимость. 

		SVD(n_factors=10, n_epochs=20, lr_all=0.002, reg_all=0.1)
		метрики:
		precision@3: 0.005223978059292151 recall@3: 0.00019313015593818672
        модель использована для построения текущей версии рекомендательной системы, обернутой в docker.
	
	Lighfm:
		LightFM(no_components=10, loss='warp', random_state=42)
		precision_at_3:0.026970956
        Самое высокое значение метрики, на основе этой модели в дальнейшем будет проведено обновление рекомендательной системы.


Docker image: 
    окончательная наладка в процессе.

	* Убедитесь, что Docker установлен и запущен на вашем компьютере.
	* Откройте командную строку или терминал.
	* Выполните:
	>> docker pull skrilen/my_private_repo:latest
	Если контейнер успешно запущен, вы будете перенаправлены в его внутреннюю оболочку или командную строку.

	http://127.0.0.1:5000/  - по этому адресу сервер будет запущен, при успешном запуске выведется приветственное 
                              сообщение.
	http://127.0.0.1:5000/predict - при переходе по этому адресу нужно ввести в терминале ид-номер пользователя, к примеру, 
                                542702. В терминале и на странице будут выведены ид рекомендованных товаров.

Файлы: 

    в текущем каталоге выложены:
        рабочий ноутбук: 
         - workbook.ipynb
        презентация к проекту:
         - Retail rocket e-comm.pptx
        каталог с файлами docker docker_container:
         - каталог src: 
            - app: содержит датасет events.csv, скрипт server.py, 
                    обученную модель SVD (ее пришлось удалить, по ограничениям git для размеров файлов. 
                    Если вы хотите построить образ - поместите обученную модель SVD_model.pickle, запустив workbook. ipynb, в этот каталог.)
            - dockerfile 
            - requirements.txt, необходимый для построения образа.

                    
    Спасибо и надеюсь, этот проект оказался вам полезен).



